!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/flex-layout"),require("@lcu/common"),require("ngx-color-picker"),require("rxjs/internal/Subject"),require("rxjs/internal/BehaviorSubject"),require("tinycolor2"),require("rxjs"),require("rxjs/operators"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("@lowcodeunit/lcu-theme-builder-common",["exports","@angular/core","@angular/forms","@angular/flex-layout","@lcu/common","ngx-color-picker","rxjs/internal/Subject","rxjs/internal/BehaviorSubject","tinycolor2","rxjs","rxjs/operators","@angular/common/http"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).lowcodeunit=e.lowcodeunit||{},e.lowcodeunit["lcu-theme-builder-common"]={}),e.ng.core,e.ng.forms,e.ng.flexLayout,e.common,e.ngxColorPicker,e.rxjs["internal/Subject"],e.rxjs["internal/BehaviorSubject"],e.tinycolor,e.rxjs,e.rxjs.operators,e.ng.common.http)}(this,(function(e,t,r,n,o,a,i,l,c,u,s,d){"use strict";function m(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var p=m(c);
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function h(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function l(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))}function g(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}Object.create;var k=function(){},v=function(){function e(){this.ColorPickerChanged=new l.BehaviorSubject(new k),this.ColorPickerClosed=new i.Subject}return e.prototype.PalettePickerChange=function(e){this.CurrentPalette=Object.assign({},e),this.ColorPickerChanged.next(this.CurrentPalette)},e.prototype.CloseColorPicker=function(e){this.ColorPickerClosed.next(e)},e}();v.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new v},token:v,providedIn:"root"}),v.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],v.ctorParameters=function(){return[]};var C=function(){function e(){}return e.prototype.ClearColorMapStorage=function(){localStorage.clear()},e.prototype.GetColorMapStorage=function(e){JSON.parse(localStorage.getItem(e));return localStorage.getItem(e)},e.prototype.SetColorMapStorage=function(e){localStorage.getItem("ColorMaps")?this.storageArray=JSON.parse(localStorage.getItem("ColorMaps")):this.storageArray=[],this.storageArray.push(e),this.updateColorMapStorage()},e.prototype.updateColorMapStorage=function(){localStorage.setItem("ColorMaps",JSON.stringify(this.storageArray))},e}();C.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new C},token:C,providedIn:"root"}),C.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],C.ctorParameters=function(){return[]};var x=function(){};x.MIX_AMOUNTS_PRIMARY={50:[!0,12],100:[!0,30],200:[!0,50],300:[!0,70],400:[!0,85],500:[!0,100],600:[!1,87],700:[!1,70],800:[!1,54],900:[!1,25]},x.MIX_AMOUNTS_SECONDARY={A100:[15,80,65],A200:[15,80,55],A400:[15,100,45],A700:[15,100,40]},x.document=window.getComputedStyle(document.documentElement),x.InitialValues={primary:{main:x.document.getPropertyValue("--initial-primary"),lighter:null,darker:null},accent:{main:x.document.getPropertyValue("--initial-accent"),lighter:null,darker:null},warn:{main:x.document.getPropertyValue("--initial-warn"),lighter:null,darker:null},lightText:x.document.getPropertyValue("--initial-light-text"),lightBackground:x.document.getPropertyValue("--initial-light-background"),darkText:x.document.getPropertyValue("--initial-dark-text"),darkBackground:x.document.getPropertyValue("--initial-dark-background")};var P=p,S=function(){function e(){}return e.prototype.GetTemplate=function(e){var t=this;return"\n\n      @import '~@angular/material/theming';\n      // Include the common styles for Angular Material. We include this here so that you only\n      // have to load a single css file for Angular Material in your app.\n\n      // Foreground Elements\n\n      // Light Theme Text\n      $dark-text: "+e.palette.lightText+";\n      $dark-primary-text: rgba($dark-text, 0.87);\n      $dark-accent-text: rgba($dark-primary-text, 0.54);\n      $dark-disabled-text: rgba($dark-primary-text, 0.38);\n      $dark-dividers: rgba($dark-primary-text, 0.12);\n      $dark-focused: rgba($dark-primary-text, 0.12);\n\n      $mat-light-theme-foreground: (\n        base:              black,\n        divider:           $dark-dividers,\n        dividers:          $dark-dividers,\n        disabled:          $dark-disabled-text,\n        disabled-button:   rgba($dark-text, 0.26),\n        disabled-text:     $dark-disabled-text,\n        elevation:         black,\n        secondary-text:    $dark-accent-text,\n        hint-text:         $dark-disabled-text,\n        accent-text:       $dark-accent-text,\n        icon:              $dark-accent-text,\n        icons:             $dark-accent-text,\n        text:              $dark-primary-text,\n        slider-min:        $dark-primary-text,\n        slider-off:        rgba($dark-text, 0.26),\n        slider-off-active: $dark-disabled-text,\n      );\n\n      // Dark Theme text\n      $light-text: "+e.palette.darkText+";\n      $light-primary-text: $light-text;\n      $light-accent-text: rgba($light-primary-text, 0.7);\n      $light-disabled-text: rgba($light-primary-text, 0.5);\n      $light-dividers: rgba($light-primary-text, 0.12);\n      $light-focused: rgba($light-primary-text, 0.12);\n\n      $mat-dark-theme-foreground: (\n        base:              $light-text,\n        divider:           $light-dividers,\n        dividers:          $light-dividers,\n        disabled:          $light-disabled-text,\n        disabled-button:   rgba($light-text, 0.3),\n        disabled-text:     $light-disabled-text,\n        elevation:         black,\n        hint-text:         $light-disabled-text,\n        secondary-text:    $light-accent-text,\n        accent-text:       $light-accent-text,\n        icon:              $light-text,\n        icons:             $light-text,\n        text:              $light-text,\n        slider-min:        $light-text,\n        slider-off:        rgba($light-text, 0.3),\n        slider-off-active: rgba($light-text, 0.3),\n      );\n\n      // Background config\n      // Light bg\n      $light-background:    "+e.palette.lightBackground+";\n      $light-bg-darker-5:   darken($light-background, 5%);\n      $light-bg-darker-10:  darken($light-background, 10%);\n      $light-bg-darker-20:  darken($light-background, 20%);\n      $light-bg-darker-30:  darken($light-background, 30%);\n      $light-bg-lighter-5:  lighten($light-background, 5%);\n      $dark-bg-alpha-4:     rgba("+e.palette.darkBackground+", 0.04);\n      $dark-bg-alpha-12:    rgba("+e.palette.darkBackground+", 0.12);\n\n      $mat-light-theme-background: (\n        background:               $light-background,\n        status-bar:               $light-bg-darker-20,\n        app-bar:                  $light-bg-darker-5,\n        hover:                    $dark-bg-alpha-4,\n        card:                     $light-bg-lighter-5,\n        dialog:                   $light-bg-lighter-5,\n        disabled-button:          $dark-bg-alpha-12,\n        raised-button:            $light-bg-lighter-5,\n        focused-button:           $dark-focused,\n        selected-button:          $light-bg-darker-20,\n        selected-disabled-button: $light-bg-darker-30,\n        disabled-button-toggle:   $light-bg-darker-10,\n        unselected-chip:          $light-bg-darker-10,\n        disabled-list-option:     $light-bg-darker-10,\n      );\n\n      // Dark bg\n      $dark-background:     "+e.palette.darkBackground+";\n      $dark-bg-lighter-5:   lighten($dark-background, 5%);\n      $dark-bg-lighter-10:  lighten($dark-background, 10%);\n      $dark-bg-lighter-20:  lighten($dark-background, 20%);\n      $dark-bg-lighter-30:  lighten($dark-background, 30%);\n      $light-bg-alpha-4:    rgba("+e.palette.lightBackground+", 0.04);\n      $light-bg-alpha-12:   rgba("+e.palette.lightBackground+", 0.12);\n\n      // Background palette for dark themes.\n      $mat-dark-theme-background: (\n        background:               $dark-background,\n        status-bar:               $dark-bg-lighter-20,\n        app-bar:                  $dark-bg-lighter-5,\n        hover:                    $light-bg-alpha-4,\n        card:                     $dark-bg-lighter-5,\n        dialog:                   $dark-bg-lighter-5,\n        disabled-button:          $light-bg-alpha-12,\n        raised-button:            $dark-bg-lighter-5,\n        focused-button:           $light-focused,\n        selected-button:          $dark-bg-lighter-20,\n        selected-disabled-button: $dark-bg-lighter-30,\n        disabled-button-toggle:   $dark-bg-lighter-10,\n        unselected-chip:          $dark-bg-lighter-20,\n        disabled-list-option:     $dark-bg-lighter-10,\n      );\n\n      // Theme Config\n      "+["primary","accent","warn"].map((function(r){return t.getScssPalette(r,e.palette[r])})).join("\n")+";\n\n      $theme: "+(e.lightness?"mat-light-theme":"mat-dark-theme")+"($theme-primary, $theme-accent, $theme-warn);\n      $altTheme: "+(e.lightness?"mat-dark-theme":"mat-light-theme")+"($theme-primary, $theme-accent, $theme-warn);\n\n      // Theme Init\n      @include angular-material-theme($theme);\n\n      .theme-alternate {\n        @include angular-material-theme($altTheme);\n      }\n\n      \n\n\n      // Specific component overrides, pieces that are not in line with the general theming\n\n      // Handle buttons appropriately, with respect to line-height\n      .mat-raised-button, .mat-stroked-button, .mat-flat-button {\n        padding: 0 1.15em;\n        margin: 0 .65em;\n        min-width: 3em;\n      }\n\n      .mat-standard-chip {\n        padding: .5em .85em;\n        min-height: 2.5em;\n      }\n      "},e.prototype.getScssPalette=function(e,t){return"\n      body {\n        --"+e+"-color: "+t.main+";\n        --"+e+"-lighter-color: "+t.lighter+";\n        --"+e+"-darker-color: "+t.darker+";\n        --text-"+e+"-color: #{"+this.getTextColor(t.main)+"};\n        --text-"+e+"-lighter-color: #{"+this.getTextColor(t.lighter)+"};\n        --text-"+e+"-darker-color: #{"+this.getTextColor(t.darker)+"};\n      }\n\n    $mat-"+e+": (\n      main: "+t.main+",\n      lighter: "+t.lighter+",\n      darker: "+t.darker+",\n      200: "+t.main+", // For slide toggle,\n      contrast : (\n        main: "+this.getTextColor(t.main)+",\n        lighter: "+this.getTextColor(t.lighter)+",\n        darker: "+this.getTextColor(t.darker)+",\n      )\n    );\n    $theme-"+e+": mat-palette($mat-"+e+", main, lighter, darker);"},e.prototype.getTextColor=function(e){return"$"+(P(e).isLight()?"dark":"light")+"-primary-text"},e}();S.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new S},token:S,providedIn:"root"}),S.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}];var $=p,w=function(){function e(e,t,r,n,o){this.http=e,this.paletteTemplateService=t,this.localStorageService=r,this.palettePickerService=n,this.zone=o,this.themeMode=!0,this.Theme=new u.Subject,this.PaletteColors=new u.Subject,this.ThemeScss=this.loadThemingScss(),this.PaletteList=[]}return Object.defineProperty(e.prototype,"Palette",{get:function(){return this.palette},set:function(e){this.palette=e,this.palettePickerService.PalettePickerChange(e),this.UpdateTheme(this.getTheme())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ThemeMode",{get:function(){return this.themeMode},set:function(e){this.themeMode=!e,this.UpdateTheme(this.getTheme())},enumerable:!1,configurable:!0}),e.prototype.loadThemingScss=function(){return this.http.get("/assets/_theming.scss",{responseType:"text"}).pipe(s.map((function(e){return e.replace(/\n/gm,"??").replace(/\$mat-([^:?]+)\s*:\s*\([? ]*50:[^()]*contrast\s*:\s*\([^)]+\)[ ?]*\);\s*?/g,(function(e,t){return"grey"===t?e:""})).replace(/\/\*.*?\*\//g,"").split(/[?][?]/g).map((function(e){return e.replace(/^\s*(\/\/.*)?$/g,"").replace(/^\$mat-blue-gray\s*:\s*\$mat-blue-grey\s*;\s*/g,"").replace(/^\s*|\s*$/g,"").replace(/:\s\s+/g,": ")})).filter((function(e){return!!e})).join("\n")})),s.map((function(e){return Sass.writeFile("~@angular/material/theming",e,(function(e){}))}))).toPromise()},e.prototype.GetTemplate=function(e){return this.paletteTemplateService.GetTemplate(e)},e.prototype.CompileScssTheme=function(e){return h(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return[4,this.ThemeScss];case 1:return t.sent(),[2,new Promise((function(t,r){Sass.compile(e.replace("@include angular-material-theme($altTheme);",""),(function(e){0===e.status?t(e.text):r(e)}))}))]}}))}))},e.prototype.GetPalette=function(e){var t=$("#ffffff"),r=this.multiply($(e).toRgb(),$(e).toRgb()),n=b($(e).tetrad(),4)[3];return y(Object.keys(x.MIX_AMOUNTS_PRIMARY).map((function(n){var o=b(x.MIX_AMOUNTS_PRIMARY[n],2),a=o[0],i=o[1];return[n,$.mix(a?t:r,$(e),i)]})),Object.keys(x.MIX_AMOUNTS_SECONDARY).map((function(e){var t=b(x.MIX_AMOUNTS_SECONDARY[e],3),o=t[0],a=t[1],i=t[2];return[e,$.mix(r,n,o).saturate(a).lighten(i)]}))).reduce((function(e,t){var r=b(t,2),n=r[0],o=r[1];return e[n]=o.toHexString(),e}),{})},e.prototype.emit=function(){this.Theme.next(this.getTheme())},e.prototype.getTheme=function(){return{palette:this.Palette,lightness:this.ThemeMode}},e.prototype.multiply=function(e,t){return e.b=Math.floor(e.b*t.b/255),e.g=Math.floor(e.g*t.g/255),e.r=Math.floor(e.r*t.r/255),$("rgb "+e.r+" "+e.g+" "+e.b)},e.prototype.UpdateTheme=function(e){var t=this,r=this.GetTemplate(e);this.zone.runOutsideAngular((function(){t.CompileScssTheme(r).then((function(e){var t=e,r=document.getElementById("theme-builder-stylesheet");r&&document.getElementsByTagName("body")[0].removeChild(r);var n=document.createElement("style");n.id="theme-builder-stylesheet",n.appendChild(document.createTextNode(t)),document.getElementsByTagName("body")[0].appendChild(n)})).catch((function(e){console.error(e)}))}))},e}();w.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new w(t.ɵɵinject(d.HttpClient),t.ɵɵinject(S),t.ɵɵinject(C),t.ɵɵinject(v),t.ɵɵinject(t.NgZone))},token:w,providedIn:"root"}),w.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],w.ctorParameters=function(){return[{type:d.HttpClient},{type:S},{type:C},{type:v},{type:t.NgZone}]};var M=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();M.decorators=[{type:t.Component,args:[{selector:"lcu-theme-builder",template:'\r\n<div fxLayout="column" fxLayoutGap="10px">\r\n  \x3c!-- <lcu-mode-toggle></lcu-mode-toggle> --\x3e\r\n  <div fxLayout="row" fxLayoutGap="10px">\r\n      <mat-toolbar color="primary">\r\n        <span class="primary-color">Primary Colors</span>\r\n      </mat-toolbar>\r\n      <mat-toolbar color="accent">\r\n        <span class="accent-color">Accent Colors</span>\r\n      </mat-toolbar>\r\n      <mat-toolbar color="warn">\r\n        <span class="warn-color">Warn Colors</span>\r\n      </mat-toolbar>\r\n  </div>\r\n  <lcu-palette-picker></lcu-palette-picker>\r\n</div>\r\n',styles:[".primary-color{color:var(--theme-primary-A700)}.accent-color{color:var(--theme-accent-A700)}.warn-color{color:var(--theme-warn-A700)}"]}]}],M.ctorParameters=function(){return[]};var T=function(){function e(e,t,r){this.elRef=e,this.renderer=t,this.themeService=r}return e.prototype.onMouseEnter=function(){this.hoverEffect(this.getThemeColor(),"underline")},e.prototype.onMouseLeave=function(){this.hoverEffect("","initial")},e.prototype.ngOnInit=function(){this.currentColor=this.getThemeColor()},e.prototype.getThemeColor=function(){var e=this.themeService.GetColorClass().value;return"color-swatch-"+e.substring(e.indexOf("-")+1,e.lastIndexOf("-"))},e.prototype.hoverEffect=function(e,t){var r=this.elRef.nativeElement.querySelector(".mat-card-title");this.renderer.setStyle(r,"text-decoration",t),(!e&&this.currentColor||e!==this.currentColor)&&this.renderer.removeClass(r,this.currentColor),e&&(this.renderer.addClass(r,e),this.currentColor=e)},e}();T.decorators=[{type:t.Directive,args:[{selector:"[theme-builder]"}]}],T.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:o.ThemeColorPickerService}]},T.propDecorators={onMouseEnter:[{type:t.HostListener,args:["mouseenter"]}],onMouseLeave:[{type:t.HostListener,args:["mouseleave"]}]};var j=p,O=function(){function e(e){this.palettePickerService=e,this.ShowBackdrop=!1}return Object.defineProperty(e.prototype,"Color",{get:function(){return this.Control.value},set:function(e){this.Control.setValue(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.SetBackdrop=function(e){this.ShowBackdrop=e},e.prototype.GetTextColor=function(e){return j(e).isLight()?"#000":"#fff"},e.prototype.ColorPickerClosed=function(e){this.palettePickerService.CloseColorPicker(e)},e.prototype.ColorPickerChange=function(e){this.Color=e},e}();O.decorators=[{type:t.Component,args:[{selector:"lcu-color-picker",template:'<div class="backdrop" *ngIf="ShowBackdrop"></div>\r\n\r\n<input \r\n  type="text" \r\n  [disabled]="Disabled" \r\n  [colorPicker]="Color" \r\n  (colorPickerOpen)="SetBackdrop(true)"\r\n  [cpPresetColors]="Variants" \r\n  [cpPosition]="\'bottom-left\'"\r\n  (colorPickerClose)="SetBackdrop(false); ColorPickerClosed($event)" \r\n  [cpOutputFormat]="\'hex\'"\r\n  [cpAlphaChannel]="\'disabled\'" \r\n  (colorPickerChange)="ColorPickerChange($event)" \r\n  [value]="Color"\r\n  [style.background]="Color" \r\n  [style.color]="GetTextColor(Color)"\r\n>\r\n',styles:[".backdrop{position:absolute;width:100vw;height:100vh;top:0;left:0;background:rgba(0,0,0,.5)}:host,input{display:block;width:100%;box-sizing:border-box;height:100%;border:0}input{text-align:center;cursor:pointer}:host{display:block}"]}]}],O.ctorParameters=function(){return[{type:v}]},O.propDecorators={Control:[{type:t.Input,args:["control"]}],Disabled:[{type:t.Input,args:["disabled"]}],Variants:[{type:t.Input,args:["variants"]}],Color:[{type:t.Input,args:["color"]}]};var F=function(){function e(e,t){var r=this;this.themeBuilderService=e,this.palettePickerService=t,this.setupForm(),this.colorPickerClosedSubscription=this.palettePickerService.ColorPickerClosed.subscribe((function(e){r.updatePalette()})),this.palettePickerService.ColorPickerChanged.subscribe((function(e){r.PrimaryColor=e.primary.main,r.AccentColor=e.accent.main,r.WarnColor=e.warn.main}))}return Object.defineProperty(e.prototype,"Primary",{get:function(){return this.Form.get("primary")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Accent",{get:function(){return this.Form.get("accent")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Warn",{get:function(){return this.Form.get("warn")},enumerable:!1,configurable:!0}),e.prototype.updatePalette=function(){var e=new k;(e=Object.assign(Object.assign({},this.palettePickerService.CurrentPalette),e)).primary.main=this.Primary.value.main,e.accent.main=this.Accent.value.main,e.warn.main=this.Warn.value.main,this.themeBuilderService.Palette=e},e.prototype.ngOnInit=function(){var e=this;this.patchValue(x.InitialValues,!0),this.Form.valueChanges.pipe(s.distinctUntilChanged((function(e,t){return JSON.stringify(e)!==JSON.stringify(t)}))).subscribe((function(t){console.log("ASKASLKDALKSD",t),e.themeBuilderService.Palette=t}))},e.prototype.ngOnDestroy=function(){this.formSubscription.unsubscribe(),this.colorPickerClosedSubscription.unsubscribe()},e.prototype.patchValue=function(e,t){this.Form.patchValue(e,{emitEvent:t})},e.prototype.setupForm=function(){this.Form=new r.FormGroup({primary:new r.FormGroup({main:new r.FormControl(""),lighter:new r.FormControl(""),darker:new r.FormControl("")},{updateOn:"change"}),accent:new r.FormGroup({main:new r.FormControl(""),lighter:new r.FormControl(""),darker:new r.FormControl("")}),warn:new r.FormGroup({main:new r.FormControl(""),lighter:new r.FormControl(""),darker:new r.FormControl("")},{updateOn:"change"}),lightText:new r.FormControl("",[]),lightBackground:new r.FormControl("",[]),darkText:new r.FormControl("",[]),darkBackground:new r.FormControl("",[])},{updateOn:"change"})},e}();F.decorators=[{type:t.Component,args:[{selector:"lcu-palette-picker",template:'<div \r\n  fxLayout="column" \r\n  fxLayoutGap="10px">\r\n  <div \r\n    fxLayout.lg="row" \r\n    fxLayout.md="row" \r\n    fxLayout.sm="column" \r\n    fxLayout.xs="column"\r\n    fxLayoutGap="10px">\r\n    <lcu-sub-palette-picker [color-picker-color]="PrimaryColor" [form]="Primary"></lcu-sub-palette-picker>\r\n    <lcu-sub-palette-picker [color-picker-color]="AccentColor" [form]="Accent"></lcu-sub-palette-picker>\r\n    <lcu-sub-palette-picker [color-picker-color]="WarnColor" [form]="Warn"></lcu-sub-palette-picker>\r\n  </div>\r\n  <lcu-variant-colors></lcu-variant-colors>\r\n</div>\r\n',styles:[""]}]}],F.ctorParameters=function(){return[{type:w},{type:v}]};var A=function(){function e(e,t){this.themeBuilderService=e,this.palettePickerService=t,this.Unlocked=new r.FormControl(!1),this.materialKeys=y(Object.keys(x.MIX_AMOUNTS_PRIMARY),Object.keys(x.MIX_AMOUNTS_SECONDARY))}return Object.defineProperty(e.prototype,"ColorPickerColor",{set:function(e){this.Main.setValue(e),this.onMainChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Main",{get:function(){return this.Form.get("main")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Lighter",{get:function(){return this.Form.get("lighter")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Darker",{get:function(){return this.Form.get("darker")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Variants",{get:function(){var e=this;return this.themeBuilderService.MaterialPaletteColors?this.materialKeys.map((function(t){return e.themeBuilderService.MaterialPaletteColors[t]})):void 0},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.Main.value&&this.onMainChange(),this.colorPickerClosedSubscription=this.palettePickerService.ColorPickerClosed.subscribe((function(t){e.onMainChange()}))},e.prototype.ngOnDestroy=function(){this.palettePickerChangedSubscription.unsubscribe(),this.colorPickerClosedSubscription.unsubscribe()},e.prototype.onMainChange=function(){this.themeBuilderService.MaterialPaletteColors=this.themeBuilderService.GetPalette(this.Form.value.main),this.Unlocked.value||(this.Form.patchValue({lighter:this.themeBuilderService.MaterialPaletteColors[50]}),this.Form.patchValue({darker:this.themeBuilderService.MaterialPaletteColors[900]}))},e}();A.decorators=[{type:t.Component,args:[{selector:"lcu-sub-palette-picker",template:'\r\n<div fxLayout="column">\r\n    \x3c!--Main Color--\x3e\r\n    <lcu-color-picker\r\n      class="main" \r\n      [control]="Main"></lcu-color-picker>\r\n  \r\n    <div fxLayout="row">\r\n      \x3c!--Light and dark colors for additional hues--\x3e\r\n      <lcu-color-picker \r\n        class="lighter" \r\n        [disabled]="!Unlocked.value" \r\n        [control]="Lighter" \r\n        [variants]="Variants"></lcu-color-picker>\r\n  \r\n      <lcu-color-picker \r\n        class="darker" \r\n        [disabled]="!Unlocked.value" \r\n        [control]="Darker" \r\n        [variants]="Variants"></lcu-color-picker>\r\n    </div>\r\n  </div>\r\n  ',styles:[".darker,.lighter,.main{border:.5px solid #ddd}.darker,.lighter{height:40px}.main{height:60px}"]}]}],A.ctorParameters=function(){return[{type:w},{type:v}]},A.propDecorators={Form:[{type:t.Input,args:["form"]}],ColorPickerColor:[{type:t.Input,args:["color-picker-color"]}]};var I=function(){function e(e){this.themeBuilderService=e,this.ToggleMode="Dark Mode"}return Object.defineProperty(e.prototype,"Toggle",{get:function(){return this.ToggleForm.get("toggle")},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.formSetup()},e.prototype.formSetup=function(){this.ToggleForm=new r.FormGroup({toggle:new r.FormControl(!1)}),this.onChanges()},e.prototype.onChanges=function(){var e=this;this.Toggle.valueChanges.subscribe((function(t){e.ToggleMode=t?"Light Mode":"Dark Mode",e.themeBuilderService.ThemeMode=t}))},e}();I.decorators=[{type:t.Component,args:[{selector:"lcu-mode-toggle",template:'<form \r\n    [formGroup]="ToggleForm" \r\n    fxLayout="row" \r\n    fxLayoutAlign="start center">\r\n    <mat-slide-toggle\r\n        (click)="$event.stopPropagation()" \r\n        formControlName="toggle"\r\n        labelPosition="before" \r\n        color="primary">\r\n    </mat-slide-toggle>\r\n    <span \r\n        class="margin-left-1 mat-card-subtitle">\r\n        {{ ToggleMode }}\r\n    </span>\r\n</form>\r\n\r\n\r\n',styles:[""]}]}],I.ctorParameters=function(){return[{type:w}]};var L=p,B=function(){function e(e,t){this.PalettePickerService=e,this.themeBuilderService=t,this.PalettePickerService.PrimaryColorPalette=[],this.PalettePickerService.AccentColorPalette=[],this.PalettePickerService.WarnColorPalette=[]}return Object.defineProperty(e.prototype,"AccentColor",{get:function(){return this._accentColor},set:function(e){this._accentColor=e,this.updateAccentColor(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"PrimaryColor",{get:function(){return this.PrimaryColor},set:function(e){this._primaryColor=e,this.updatePrimaryColor(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"WarnColor",{get:function(){return this.WarnColor},set:function(e){this._warnColor=e,this.updateWarnColor(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"PrimaryColorControl",{get:function(){return this.Form.get("primaryColorControl")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AccentColorControl",{get:function(){return this.Form.get("accentColorControl")},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.setupForm(),this.paletteChangedSubscription=this.PalettePickerService.ColorPickerChanged.subscribe((function(t){t&&t.primary&&(e.updateAccentColor(t.accent.main),e.updatePrimaryColor(t.primary.main),e.updateWarnColor(t.warn.main))}))},e.prototype.ngOnDestroy=function(){this.paletteChangedSubscription.unsubscribe()},e.prototype.updatePrimaryColor=function(e){var t,r;this.PalettePickerService.PrimaryColorPalette=this.computeColors(e||this.PrimaryColorControl.value);try{for(var n=f(this.PalettePickerService.PrimaryColorPalette),o=n.next();!o.done;o=n.next()){var a=o.value,i="--theme-primary-"+a.name,l=a.hex,c="--theme-primary-contrast-"+a.name,u=a.darkContrast?"rgba(black, 0.87)":"white";document.documentElement.style.setProperty(i,l),document.documentElement.style.setProperty(c,u)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.updateAccentColor=function(e){var t,r;this.PalettePickerService.AccentColorPalette=this.computeColors(e||this.AccentColorControl.value);try{for(var n=f(this.PalettePickerService.AccentColorPalette),o=n.next();!o.done;o=n.next()){var a=o.value,i="--theme-accent-"+a.name,l=a.hex,c="--theme-primary-contrast-"+a.name,u=a.darkContrast?"rgba(black, 0.87)":"white";document.documentElement.style.setProperty(i,l),document.documentElement.style.setProperty(c,u)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.updateWarnColor=function(e){var t,r;this.PalettePickerService.WarnColorPalette=this.computeColors(e);try{for(var n=f(this.PalettePickerService.WarnColorPalette),o=n.next();!o.done;o=n.next()){var a=o.value,i="--theme-warn-"+a.name,l=a.hex,c="--theme-primary-contrast-"+a.name,u=a.darkContrast?"rgba(black, 0.87)":"white";document.documentElement.style.setProperty(i,l),document.documentElement.style.setProperty(c,u)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.setupForm=function(){this.Form=new r.FormGroup({primaryColorControl:new r.FormControl("#ffcc11"),accentColorControl:new r.FormControl("#0000aa")})},e.prototype.computeColors=function(e){var t=L("#ffffff"),r=this.themeBuilderService.multiply(L(e).toRgb(),L(e).toRgb()),n=b(L(e).tetrad(),4)[3];return[this.getColorObject(L.mix(t,L(e),12),"50"),this.getColorObject(L.mix(t,L(e),30),"100"),this.getColorObject(L.mix(t,L(e),50),"200"),this.getColorObject(L.mix(t,L(e),70),"300"),this.getColorObject(L.mix(t,L(e),85),"400"),this.getColorObject(L(e),"500"),this.getColorObject(L.mix(r,L(e),87),"600"),this.getColorObject(L.mix(r,L(e),70),"700"),this.getColorObject(L.mix(r,L(e),54),"800"),this.getColorObject(L.mix(r,L(e),25),"900"),this.getColorObject(L.mix(r,n,15).saturate(80).lighten(65),"A100"),this.getColorObject(L.mix(r,n,15).saturate(80).lighten(55),"A200"),this.getColorObject(L.mix(r,n,15).saturate(100).lighten(45),"A400"),this.getColorObject(L.mix(r,n,15).saturate(100).lighten(40),"A700")]},e.prototype.getColorObject=function(e,t){var r=L(e);return{name:t,hex:r.toHexString(),darkContrast:r.isLight()}},e}();B.decorators=[{type:t.Component,args:[{selector:"lcu-variant-colors",template:'<form\r\n    fxLayout="column"\r\n    fxLayoutGap="10px"\r\n    [formGroup]="Form"\r\n    novalidate>\r\n    <div fxLayout="row" fxLayoutGap="10px">\r\n        <div fxFlex="33" fxLayout="column">\r\n            <div fxLayout="row" fxLayoutGap="10px" \r\n            fxLayoutAlign="space-between center"\r\n            class="padding-left-2 padding-right-2" \r\n            *ngFor="let color of PalettePickerService.PrimaryColorPalette" \r\n            [style.background-color]="color.hex" \r\n            [style.color]="color.darkContrast ? \'black\' : \'white\'">\r\n            <div>\r\n                {{color.name}}\r\n            </div>\r\n            <div>\r\n                {{color.hex}}\r\n            </div>\r\n        </div>\r\n        </div>\r\n        <div fxFlex="33" fxLayout="column">\r\n            <div fxLayout="row" fxLayoutGap="10px" \r\n                fxLayoutAlign="space-between center"\r\n                class="padding-left-2 padding-right-2"\r\n                *ngFor="let color of PalettePickerService.AccentColorPalette" \r\n                [style.background-color]="color.hex" \r\n                [style.color]="color.darkContrast ? \'black\' : \'white\'">\r\n                <div>\r\n                    {{color.name}}\r\n                </div>\r\n                <div>\r\n                    {{color.hex}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div fxFlex="33" fxLayout="column">\r\n            <div fxLayout="row" fxLayoutGap="10px" \r\n            fxLayoutAlign="space-between center"\r\n            class="padding-left-2 padding-right-2"\r\n            *ngFor="let color of PalettePickerService.WarnColorPalette" \r\n                [style.background-color]="color.hex" \r\n                [style.color]="color.darkContrast ? \'black\' : \'white\'">\r\n                <div>\r\n                    {{color.name}}\r\n                </div>\r\n                <div>\r\n                    {{color.hex}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n\r\n',styles:[""]}]}],B.ctorParameters=function(){return[{type:v},{type:w}]},B.propDecorators={AccentColor:[{type:t.Input,args:["accent-color"]}],PrimaryColor:[{type:t.Input,args:["primary-color"]}],WarnColor:[{type:t.Input,args:["warn-color"]}]};var N=function(e){Object.assign(this,e)},G=function(){function e(e,t){this.palettePickerService=e,this.themeBuilderService=t,this.setupForm(),this.themes()}return Object.defineProperty(e.prototype,"ManualAccent",{get:function(){return this.ManualForm.get("manualAccent")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ManualPrimary",{get:function(){return this.ManualForm.get("manualPrimary")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ManualThemeName",{get:function(){return this.ManualForm.get("manualThemeName")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ManualWarn",{get:function(){return this.ManualForm.get("manualWarn")},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.SetActiveTheme=function(e){var t=new k;(t=Object.assign(Object.assign({},this.palettePickerService.CurrentPalette),t)).primary.main=e.Primary,t.accent.main=e.Accent,t.warn.main=e.Warn,this.themeBuilderService.Palette=t},e.prototype.SetManualTheme=function(){var e;e=new N({ID:this.ManualThemeName.value,Primary:this.ManualPrimary.value,Accent:this.ManualAccent.value,Warn:this.ManualWarn.value}),this.Themes.unshift(e),this.SetActiveTheme(e)},e.prototype.setupForm=function(){this.ManualForm=new r.FormGroup({manualThemeName:new r.FormControl("",{validators:r.Validators.required}),manualPrimary:new r.FormControl("",{validators:r.Validators.required}),manualAccent:new r.FormControl("",{validators:r.Validators.required}),manualWarn:new r.FormControl("",{validators:r.Validators.required})})},e.prototype.themes=function(){this.Themes=[new N({ID:"Fathym Brand",Primary:x.document.getPropertyValue("--initial-primary"),Accent:x.document.getPropertyValue("--initial-accent"),Warn:x.document.getPropertyValue("--initial-warn")}),new N({ID:"Yellow",Primary:"#ffcc11",Accent:"#06a5ff",Warn:"#990000"}),new N({ID:"Pink",Primary:"#a83271",Accent:"#6103ff",Warn:"#b9f013"})]},e}();G.decorators=[{type:t.Component,args:[{selector:"lcu-theme-picker",template:'<button mat-icon-button id="theme-selector" [mat-menu-trigger-for]="themeMenu" tabindex="-1">\r\n    <mat-icon class="auto-flip">format_color_fill</mat-icon>\r\n</button>\r\n\r\n<mat-menu #themeMenu="matMenu">\r\n    <lcu-mode-toggle class="margin-2"></lcu-mode-toggle>\r\n    <div class="theme-selector-container"\r\n        tabindex="-1"\r\n        (click)="$event.stopPropagation();"\r\n        (keydown.tab)="$event.stopPropagation()"\r\n        (keydown.tab)="$event.stopPropagation()"\r\n        (keydown.shift.tab)="$event.stopPropagation()">\r\n        <div *ngFor="let theme of Themes" fxLayout="column">\r\n            <button mat-button class="theme-selector" (click)="SetActiveTheme(theme)">\r\n                <div \r\n                    fxLayout="row"\r\n                    fxLayout="start center"\r\n                    class="margin-1">\r\n                    <div class="theme-primary" [ngStyle]="{\'background-color\':theme.Primary}">\r\n                        <div class="theme-accent" [ngStyle]="{\'background-color\':theme.Accent}"></div>\r\n                        <div class="theme-warn" [ngStyle]="{\'background-color\':theme.Warn}"></div>\r\n                        \x3c!-- <mat-icon *ngIf="activeTheme===theme" class="center theme-check">check</mat-icon> --\x3e\r\n                    </div>\r\n                    <span \r\n                    class="margin-left-2 mat-card-subtitle">\r\n                        {{ theme.ID }}\r\n                    </span>\r\n                </div>\r\n            </button>\r\n        </div>\r\n        <div class="margin-2 margin-top-5">\r\n            <mat-card>\r\n                <mat-card-header>\r\n                    <div mat-card-avatar class="lcu-card-avatar">\r\n                        <mat-icon color="accent">palette</mat-icon>\r\n                    </div>\r\n                    <mat-card-title>\r\n                        Manual Theme\r\n                    </mat-card-title>\r\n                </mat-card-header>\r\n                <mat-card-content>\r\n                    <form\r\n                    fxLayout="column"\r\n                    fxLayoutGap="10px"\r\n                    [formGroup]="ManualForm"\r\n                    novalidate\r\n                    (click)="$event.stopPropagation()">\r\n                    <mat-form-field>\r\n                        <input\r\n                        type="text"\r\n                        matInput\r\n                        formControlName="manualThemeName"\r\n                        />\r\n                        <mat-hint>Theme Name</mat-hint>\r\n                    </mat-form-field>\r\n                    <mat-form-field>\r\n                        <input\r\n                        type="text"\r\n                        matInput\r\n                        formControlName="manualPrimary"\r\n                        />\r\n                        <mat-hint>Primary Color</mat-hint>\r\n                    </mat-form-field>\r\n                    <mat-form-field>\r\n                        <input\r\n                        type="text"\r\n                        matInput\r\n                        formControlName="manualAccent"\r\n                        />\r\n                        <mat-hint>Accent Color</mat-hint>\r\n                    </mat-form-field>\r\n                    <mat-form-field>\r\n                        <input\r\n                        type="text"\r\n                        matInput\r\n                        formControlName="manualWarn"\r\n                        />\r\n                        <mat-hint>Warn Color</mat-hint>\r\n                    </mat-form-field>\r\n                </form>\r\n                </mat-card-content>\r\n                <mat-card-actions>\r\n                    <button\r\n                    mat-raised-button\r\n                    color="primary"\r\n                    class="margin-top-3"\r\n                    [disabled]="!ManualForm.valid"\r\n                    (click)="SetManualTheme()"\r\n                        >\r\n                        Set Theme\r\n                    </button>\r\n                </mat-card-actions>\r\n            </mat-card>\r\n           \r\n        </div>\r\n    </div>\r\n</mat-menu>',styles:[".toolbar-spacer{flex:1 1 auto}.theme-selectors-container{width:390px;margin:0 8px}div.theme-primary{width:50px;height:50px}div.theme-accent{width:25px;height:25px;position:absolute;bottom:15px;left:17px}div.theme-warn{width:15px;height:15px;position:absolute;bottom:15px;left:30px}"]}]}],G.ctorParameters=function(){return[{type:v},{type:w}]};var D=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[w]}},e}();D.decorators=[{type:t.NgModule,args:[{declarations:[M,T,O,F,A,I,B,G],imports:[o.FathymSharedModule,r.FormsModule,r.ReactiveFormsModule,n.FlexLayoutModule,o.MaterialModule,a.ColorPickerModule],exports:[M,T,G],entryComponents:[G]}]}];var W=function(){},V=function(){},E=function(){},_=function(){};e.ColorModel=_,e.PaletteModel=k,e.PalettePickerService=v,e.SubPaletteModel=V,e.ThemeBuilderComponent=M,e.ThemeBuilderDirective=T,e.ThemeBuilderModel=W,e.ThemeBuilderModule=D,e.ThemeBuilderService=w,e.ThemeModel=E,e.ThemePickerModel=N,e.ɵa=O,e.ɵb=F,e.ɵc=S,e.ɵd=C,e.ɵe=A,e.ɵf=I,e.ɵg=B,e.ɵh=G,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=lowcodeunit-lcu-theme-builder-common.umd.min.js.map