{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/common/src/lib/models/palette.model.ts","../../../projects/common/src/lib/services/palette-picker.service.ts","../../../projects/common/src/lib/services/local-storage.service.ts","../../../projects/common/src/lib/utils/constants.utils.ts","../../../projects/common/src/lib/services/palette-template.service.ts","../../../projects/common/src/lib/services/theme-builder.service.ts","../../../projects/common/src/lib/controls/theme-builder/theme-builder.component.ts","../../../projects/common/src/lib/directives/theme-builder.directive.ts","../../../projects/common/src/lib/controls/color-picker/color-picker.component.ts","../../../projects/common/src/lib/controls/palette-picker/palette-picker.component.ts","../../../projects/common/src/lib/controls/sub-palette-picker/sub-palette-picker.component.ts","../../../projects/common/src/lib/controls/mode-toggle/mode-toggle.component.ts","../../../projects/common/src/lib/controls/variant-colors/variant-colors.component.ts","../../../projects/common/src/lib/models/theme-picker.model.ts","../../../projects/common/src/lib/controls/theme-picker/theme-picker.component.ts","../../../projects/common/src/lib/theme-builder.module.ts","../../../projects/common/src/lib/models/theme-builder.model.ts","../../../projects/common/src/lib/models/sub-palette.model.ts","../../../projects/common/src/lib/models/theme.model.ts","../../../projects/common/src/lib/models/color.model.ts"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","Object","create","__values","o","s","m","i","__read","r","ar","error","__spread","arguments","concat","PalettePickerService","ColorPickerChanged","BehaviorSubject","PaletteModel","ColorPickerClosed","Subject","prototype","PalettePickerChange","params","CurrentPalette","assign","CloseColorPicker","Injectable","args","providedIn","LocalStorageService","ClearColorMapStorage","localStorage","clear","GetColorMapStorage","name","JSON","parse","getItem","SetColorMapStorage","colorMap","storageArray","updateColorMapStorage","setItem","stringify","Constants","MIX_AMOUNTS_PRIMARY","50","100","200","300","400","500","600","700","800","900","MIX_AMOUNTS_SECONDARY","A100","A200","A400","A700","document","window","getComputedStyle","documentElement","InitialValues","primary","main","getPropertyValue","lighter","darker","accent","warn","lightText","lightBackground","darkText","darkBackground","tinyColor","tinycolor","PaletteTemplateService","GetTemplate","theme","_this","palette","map","x","getScssPalette","join","lightness","subPalette","getTextColor","col","isLight","ThemeBuilderService","http","paletteTemplateService","localStorageService","palettePickerService","zone","themeMode","Theme","PaletteColors","ThemeScss","loadThemingScss","PaletteList","defineProperty","UpdateTheme","getTheme","light","get","responseType","pipe","replace","all","split","l","filter","txt","Sass","writeFile","toPromise","CompileScssTheme","_a","res","rej","compile","status","text","GetPalette","color","baseLight","baseDark","multiply","toRgb","baseTriad","tetrad","keys","k","amount","mix","sat","saturate","lighten","reduce","acc","_b","c","toHexString","emit","Palette","ThemeMode","rgb1","rgb2","b","Math","floor","source","runOutsideAngular","compiledDynamicCSS","dynamicStyleSheet","getElementById","getElementsByTagName","removeChild","style","createElement","id","appendChild","createTextNode","catch","err","console","HttpClient","NgZone","ThemeBuilderComponent","ngOnInit","Component","selector","template","ThemeBuilderDirective","elRef","renderer","themeService","onMouseEnter","hoverEffect","getThemeColor","onMouseLeave","currentColor","GetColorClass","substring","indexOf","lastIndexOf","decoration","title","nativeElement","querySelector","setStyle","removeClass","addClass","Directive","ElementRef","Renderer2","ThemeColorPickerService","HostListener","ColorPickerComponent","ShowBackdrop","Control","setValue","SetBackdrop","on","GetTextColor","evt","ColorPickerChange","Color","Input","PalettePickerComponent","themeBuilderService","setupForm","colorPickerClosedSubscription","subscribe","val","updatePalette","PrimaryColor","AccentColor","WarnColor","Form","Primary","Accent","Warn","patchValue","valueChanges","distinctUntilChanged","a","log","ngOnDestroy","formSubscription","unsubscribe","emitValue","emitEvent","FormGroup","FormControl","updateOn","SubPalettePickerComponent","Unlocked","materialKeys","Main","onMainChange","MaterialPaletteColors","undefined","palettePickerChangedSubscription","LightnessPickerComponent","ToggleMode","ToggleForm","formSetup","toggle","onChanges","Toggle","VariantColorsComponent","PrimaryColorPalette","AccentColorPalette","WarnColorPalette","_accentColor","updateAccentColor","_primaryColor","updatePrimaryColor","_warnColor","updateWarnColor","paletteChangedSubscription","computeColors","PrimaryColorControl","_c","key","hex","key2","value2","darkContrast","setProperty","AccentColorControl","primaryColorControl","accentColorControl","baseLightColor","baseDarkColor","baseTetrad","getColorObject","opts","ThemePickerComponent","themes","ManualForm","SetActiveTheme","SetManualTheme","manualPalette","ThemePickerModel","ID","ManualThemeName","ManualPrimary","ManualAccent","ManualWarn","Themes","unshift","manualThemeName","validators","Validators","required","manualPrimary","manualAccent","manualWarn","ThemeBuilderModule","forRoot","ngModule","providers","NgModule","declarations","imports","FathymSharedModule","FormsModule","ReactiveFormsModule","FlexLayoutModule","MaterialModule","ColorPickerModule","exports","entryComponents"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { SubPaletteModel } from './sub-palette.model';\r\nimport { MaterialPaletteModel } from './material-palette.model';\r\n\r\nexport class PaletteModel {\r\n    public accent: SubPaletteModel;\r\n    public primary: SubPaletteModel;\r\n    public warn: SubPaletteModel;\r\n    public AccentColorPalette?: MaterialPaletteModel;\r\n    public PrimaryColorPalette?: MaterialPaletteModel;\r\n    public WarnColorPalette?: MaterialPaletteModel;\r\n    public ColorMap?: Map<string, object>;\r\n    public darkBackground: string;\r\n    public darkText: string;\r\n    public lightBackground: string;\r\n    public lightText: string;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Subject } from 'rxjs/internal/Subject';\r\nimport { PaletteModel } from '../models/palette.model';\r\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\r\nimport { ColorModel } from '../models/color.model';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\n\r\n\r\nexport class PalettePickerService {\r\n\r\n    /**\r\n     * \r\n     */\r\n    public ColorPickerChanged: Subject<PaletteModel>;\r\n\r\n    /**\r\n     * Event after color picker has closed\r\n     */\r\n    public ColorPickerClosed: Subject<any>;\r\n\r\n    /**\r\n     * Current color palette\r\n     */\r\n    public CurrentPalette: PaletteModel;\r\n\r\n    /**\r\n     * Array of primary colors\r\n     */\r\n    public PrimaryColorPalette: Array<ColorModel>;\r\n\r\n    /**\r\n     * Array of accent colors\r\n     */\r\n    public AccentColorPalette: Array<ColorModel>;\r\n\r\n    /**\r\n     * Array of warn colors\r\n     */\r\n    public WarnColorPalette: Array<ColorModel>;\r\n\r\n    constructor() {\r\n        this.ColorPickerChanged = new BehaviorSubject<PaletteModel>(new PaletteModel());\r\n        this.ColorPickerClosed = new Subject<any>();\r\n    }\r\n\r\n    public PalettePickerChange(params: PaletteModel): void {\r\n\r\n        this.CurrentPalette = { ...params };\r\n        this.ColorPickerChanged.next( this.CurrentPalette );\r\n    }\r\n\r\n    /**\r\n     * Event when color picker is closed, use this to kick off\r\n     * the process of building color variants and everything else\r\n     * Doing this prevents multiple processes that occur during\r\n     * Form Control changes\r\n     * \r\n     * @param params Selected color from color picker\r\n     */\r\n    public CloseColorPicker(params: string): void {\r\n\r\n        this.ColorPickerClosed.next( params );\r\n    }\r\n}\r\n","import { ColorMapModel } from './../models/color-map.model';\r\nimport { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\n\r\nexport class LocalStorageService {\r\n\r\n    protected colorMap: BehaviorSubject<string>;\r\n    protected storageArray: Array<ColorMapModel>;\r\n\r\n    constructor() {}\r\n\r\n    public ClearColorMapStorage(): void {\r\n        localStorage.clear();\r\n    }\r\n\r\n    public GetColorMapStorage(name: string): string {\r\n        // return this.colorPalette;\r\n        const arr: Array<ColorMapModel> = JSON.parse(localStorage.getItem(name));\r\n        return localStorage.getItem(name);\r\n    }\r\n\r\n    public SetColorMapStorage(colorMap: ColorMapModel): void {\r\n        // if ColorMaps already exists\r\n        if (localStorage.getItem('ColorMaps')) {\r\n\r\n            // return storage, then parse saved string\r\n            this.storageArray = JSON.parse(localStorage.getItem('ColorMaps'));\r\n        } else {\r\n            this.storageArray = [];\r\n        }\r\n\r\n        // update storage array\r\n        this.storageArray.push(colorMap);\r\n        this.updateColorMapStorage();\r\n    }\r\n\r\n    protected updateColorMapStorage(): void {\r\n        localStorage.setItem('ColorMaps', JSON.stringify(this.storageArray));\r\n    }\r\n}\r\n","import { PaletteModel } from '../models/palette.model';\r\n\r\n// @dynamic\r\n/**\r\n * @dynamic need this because there are static members\r\n */\r\n\r\nexport class Constants {\r\n    public static MIX_AMOUNTS_PRIMARY = {\r\n        50: [true, 12],\r\n        100: [true, 30],\r\n        200: [true, 50],\r\n        300: [true, 70],\r\n        400: [true, 85],\r\n        500: [true, 100],\r\n        600: [false, 87],\r\n        700: [false, 70],\r\n        800: [false, 54],\r\n        900: [false, 25]\r\n    };\r\n\r\n    public static MIX_AMOUNTS_SECONDARY = {\r\n        A100: [15, 80, 65],\r\n        A200: [15, 80, 55],\r\n        A400: [15, 100, 45],\r\n        A700: [15, 100, 40]\r\n    };\r\n\r\n      public static document = window.getComputedStyle(document.documentElement);\r\n\r\n      public static InitialValues: PaletteModel = {\r\n        primary: { main: Constants.document.getPropertyValue('--initial-primary'), lighter: null, darker: null },\r\n        accent: { main: Constants.document.getPropertyValue('--initial-accent'), lighter: null, darker: null },\r\n        warn: { main: Constants.document.getPropertyValue('--initial-warn'), lighter: null, darker: null },\r\n        lightText: Constants.document.getPropertyValue('--initial-light-text'),\r\n        lightBackground: Constants.document.getPropertyValue('--initial-light-background'),\r\n        darkText: Constants.document.getPropertyValue('--initial-dark-text'),\r\n        darkBackground: Constants.document.getPropertyValue('--initial-dark-background')\r\n      };\r\n\r\n  }\r\n","import { ThemeModel } from './../models/theme.model';\r\nimport { SubPaletteModel } from './../models/sub-palette.model';\r\nimport { Injectable } from '@angular/core';\r\nimport * as tinycolor from 'tinycolor2';\r\n\r\nconst tinyColor = tinycolor;\r\ntype RGBA = tinycolor.ColorFormats.RGBA;\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n  })\r\n\r\nexport class PaletteTemplateService {\r\n\r\n  /**\r\n   * Return template for scss\r\n   *\r\n   * @param theme current theme\r\n   */\r\n    public GetTemplate(theme: ThemeModel): string {\r\n\r\n      const template = `\r\n\r\n      @import '~@angular/material/theming';\r\n      // Include the common styles for Angular Material. We include this here so that you only\r\n      // have to load a single css file for Angular Material in your app.\r\n\r\n      // Foreground Elements\r\n\r\n      // Light Theme Text\r\n      $dark-text: ${theme.palette.lightText};\r\n      $dark-primary-text: rgba($dark-text, 0.87);\r\n      $dark-accent-text: rgba($dark-primary-text, 0.54);\r\n      $dark-disabled-text: rgba($dark-primary-text, 0.38);\r\n      $dark-dividers: rgba($dark-primary-text, 0.12);\r\n      $dark-focused: rgba($dark-primary-text, 0.12);\r\n\r\n      $mat-light-theme-foreground: (\r\n        base:              black,\r\n        divider:           $dark-dividers,\r\n        dividers:          $dark-dividers,\r\n        disabled:          $dark-disabled-text,\r\n        disabled-button:   rgba($dark-text, 0.26),\r\n        disabled-text:     $dark-disabled-text,\r\n        elevation:         black,\r\n        secondary-text:    $dark-accent-text,\r\n        hint-text:         $dark-disabled-text,\r\n        accent-text:       $dark-accent-text,\r\n        icon:              $dark-accent-text,\r\n        icons:             $dark-accent-text,\r\n        text:              $dark-primary-text,\r\n        slider-min:        $dark-primary-text,\r\n        slider-off:        rgba($dark-text, 0.26),\r\n        slider-off-active: $dark-disabled-text,\r\n      );\r\n\r\n      // Dark Theme text\r\n      $light-text: ${theme.palette.darkText};\r\n      $light-primary-text: $light-text;\r\n      $light-accent-text: rgba($light-primary-text, 0.7);\r\n      $light-disabled-text: rgba($light-primary-text, 0.5);\r\n      $light-dividers: rgba($light-primary-text, 0.12);\r\n      $light-focused: rgba($light-primary-text, 0.12);\r\n\r\n      $mat-dark-theme-foreground: (\r\n        base:              $light-text,\r\n        divider:           $light-dividers,\r\n        dividers:          $light-dividers,\r\n        disabled:          $light-disabled-text,\r\n        disabled-button:   rgba($light-text, 0.3),\r\n        disabled-text:     $light-disabled-text,\r\n        elevation:         black,\r\n        hint-text:         $light-disabled-text,\r\n        secondary-text:    $light-accent-text,\r\n        accent-text:       $light-accent-text,\r\n        icon:              $light-text,\r\n        icons:             $light-text,\r\n        text:              $light-text,\r\n        slider-min:        $light-text,\r\n        slider-off:        rgba($light-text, 0.3),\r\n        slider-off-active: rgba($light-text, 0.3),\r\n      );\r\n\r\n      // Background config\r\n      // Light bg\r\n      $light-background:    ${theme.palette.lightBackground};\r\n      $light-bg-darker-5:   darken($light-background, 5%);\r\n      $light-bg-darker-10:  darken($light-background, 10%);\r\n      $light-bg-darker-20:  darken($light-background, 20%);\r\n      $light-bg-darker-30:  darken($light-background, 30%);\r\n      $light-bg-lighter-5:  lighten($light-background, 5%);\r\n      $dark-bg-alpha-4:     rgba(${theme.palette.darkBackground}, 0.04);\r\n      $dark-bg-alpha-12:    rgba(${theme.palette.darkBackground}, 0.12);\r\n\r\n      $mat-light-theme-background: (\r\n        background:               $light-background,\r\n        status-bar:               $light-bg-darker-20,\r\n        app-bar:                  $light-bg-darker-5,\r\n        hover:                    $dark-bg-alpha-4,\r\n        card:                     $light-bg-lighter-5,\r\n        dialog:                   $light-bg-lighter-5,\r\n        disabled-button:          $dark-bg-alpha-12,\r\n        raised-button:            $light-bg-lighter-5,\r\n        focused-button:           $dark-focused,\r\n        selected-button:          $light-bg-darker-20,\r\n        selected-disabled-button: $light-bg-darker-30,\r\n        disabled-button-toggle:   $light-bg-darker-10,\r\n        unselected-chip:          $light-bg-darker-10,\r\n        disabled-list-option:     $light-bg-darker-10,\r\n      );\r\n\r\n      // Dark bg\r\n      $dark-background:     ${theme.palette.darkBackground};\r\n      $dark-bg-lighter-5:   lighten($dark-background, 5%);\r\n      $dark-bg-lighter-10:  lighten($dark-background, 10%);\r\n      $dark-bg-lighter-20:  lighten($dark-background, 20%);\r\n      $dark-bg-lighter-30:  lighten($dark-background, 30%);\r\n      $light-bg-alpha-4:    rgba(${theme.palette.lightBackground}, 0.04);\r\n      $light-bg-alpha-12:   rgba(${theme.palette.lightBackground}, 0.12);\r\n\r\n      // Background palette for dark themes.\r\n      $mat-dark-theme-background: (\r\n        background:               $dark-background,\r\n        status-bar:               $dark-bg-lighter-20,\r\n        app-bar:                  $dark-bg-lighter-5,\r\n        hover:                    $light-bg-alpha-4,\r\n        card:                     $dark-bg-lighter-5,\r\n        dialog:                   $dark-bg-lighter-5,\r\n        disabled-button:          $light-bg-alpha-12,\r\n        raised-button:            $dark-bg-lighter-5,\r\n        focused-button:           $light-focused,\r\n        selected-button:          $dark-bg-lighter-20,\r\n        selected-disabled-button: $dark-bg-lighter-30,\r\n        disabled-button-toggle:   $dark-bg-lighter-10,\r\n        unselected-chip:          $dark-bg-lighter-20,\r\n        disabled-list-option:     $dark-bg-lighter-10,\r\n      );\r\n\r\n      // Theme Config\r\n      ${['primary', 'accent', 'warn'].map(x => this.getScssPalette(x, theme.palette[x])).join('\\n')};\r\n\r\n      $theme: ${!theme.lightness ? 'mat-dark-theme' : 'mat-light-theme'}($theme-primary, $theme-accent, $theme-warn);\r\n      $altTheme: ${!theme.lightness ? 'mat-light-theme' : 'mat-dark-theme'}($theme-primary, $theme-accent, $theme-warn);\r\n\r\n      // Theme Init\r\n      @include angular-material-theme($theme);\r\n\r\n      .theme-alternate {\r\n        @include angular-material-theme($altTheme);\r\n      }\r\n\r\n      \r\n\r\n\r\n      // Specific component overrides, pieces that are not in line with the general theming\r\n\r\n      // Handle buttons appropriately, with respect to line-height\r\n      .mat-raised-button, .mat-stroked-button, .mat-flat-button {\r\n        padding: 0 1.15em;\r\n        margin: 0 .65em;\r\n        min-width: 3em;\r\n      }\r\n\r\n      .mat-standard-chip {\r\n        padding: .5em .85em;\r\n        min-height: 2.5em;\r\n      }\r\n      `;\r\n\r\n    return template;\r\n    }\r\n\r\n    /**\r\n     * Get the Scss Palatte\r\n     *\r\n     * @param name palette name\r\n     *\r\n     * @param subPalette SubPaletteModel\r\n     */\r\n    protected getScssPalette(name: string, subPalette: SubPaletteModel): string {\r\n      return `\r\n      body {\r\n        --${name}-color: ${subPalette.main};\r\n        --${name}-lighter-color: ${subPalette.lighter};\r\n        --${name}-darker-color: ${subPalette.darker};\r\n        --text-${name}-color: #{${this.getTextColor(subPalette.main)}};\r\n        --text-${name}-lighter-color: #{${this.getTextColor(subPalette.lighter)}};\r\n        --text-${name}-darker-color: #{${this.getTextColor(subPalette.darker)}};\r\n      }\r\n\r\n    $mat-${name}: (\r\n      main: ${subPalette.main},\r\n      lighter: ${subPalette.lighter},\r\n      darker: ${subPalette.darker},\r\n      200: ${subPalette.main}, // For slide toggle,\r\n      contrast : (\r\n        main: ${this.getTextColor(subPalette.main)},\r\n        lighter: ${this.getTextColor(subPalette.lighter)},\r\n        darker: ${this.getTextColor(subPalette.darker)},\r\n      )\r\n    );\r\n    $theme-${name}: mat-palette($mat-${name}, main, lighter, darker);`;\r\n  }\r\n\r\n    /**\r\n     * Get text color\r\n     *\r\n     * @param col color\r\n     */\r\n    protected getTextColor(col: string): string {\r\n      return `$${tinyColor(col).isLight() ? 'dark' : 'light'}-primary-text`;\r\n    }\r\n}\r\n","import { PalettePickerService } from './palette-picker.service';\r\nimport { ColorMapModel } from './../models/color-map.model';\r\nimport { LocalStorageService } from './local-storage.service';\r\nimport { Constants } from './../utils/constants.utils';\r\nimport { MaterialPaletteModel } from './../models/material-palette.model';\r\nimport { Injectable, NgZone } from '@angular/core';\r\nimport * as tinycolor from 'tinycolor2';\r\nimport { PaletteModel } from '../models/palette.model';\r\nimport { ReplaySubject, Subject } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { ThemeModel } from '../models/theme.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { PaletteListModel } from '../models/palette-list.model';\r\nimport { PaletteTemplateService } from './palette-template.service';\r\n\r\nconst tinyColor = tinycolor;\r\n\r\ntype RGBA = tinycolor.ColorFormats.RGBA;\r\n\r\n// tell typescript that Sass exists\r\n// loads the synchronous Sass.js\r\ndeclare var Sass: any;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class ThemeBuilderService {\r\n\r\n  /**\r\n   * Is it lightness\r\n   */\r\n  protected themeMode: boolean;\r\n\r\n  /**\r\n   * Theme Palette\r\n   */\r\n  protected palette: PaletteModel;\r\n\r\n  // public $fonts = new Subject<FontSelectionModel[]>();\r\n  public Theme: Subject<ThemeModel>;\r\n  public PaletteColors: Subject<Partial<PaletteModel>>;\r\n  public ThemeScss: Promise<void>;\r\n  public PaletteList: Array<PaletteListModel>;\r\n\r\n  /**\r\n   * Palette colors, from 50 - A700\r\n   */\r\n  public MaterialPaletteColors: MaterialPaletteModel;\r\n\r\n  constructor(\r\n    protected http: HttpClient, \r\n    protected paletteTemplateService: PaletteTemplateService,\r\n    protected localStorageService: LocalStorageService,\r\n    protected palettePickerService: PalettePickerService,\r\n    protected zone: NgZone,) {\r\n\r\n    this.themeMode = true;\r\n    this.Theme = new Subject<ThemeModel>();\r\n    this.PaletteColors = new Subject<Partial<PaletteModel>>();\r\n    this.ThemeScss = this.loadThemingScss();\r\n\r\n    this.PaletteList = [];\r\n   }\r\n\r\n   /**\r\n    * Set Palette colors\r\n    */\r\n    public set Palette(palette: PaletteModel) {\r\n\r\n      this.palette = palette;\r\n      this.palettePickerService.PalettePickerChange(palette);\r\n\r\n      this.UpdateTheme(this.getTheme());\r\n    }\r\n\r\n    public get Palette() {\r\n      return this.palette;\r\n    }\r\n\r\n    public set ThemeMode(light: boolean) {\r\n      this.themeMode = !light;\r\n      this.UpdateTheme(this.getTheme());\r\n    }\r\n\r\n    public get ThemeMode() {\r\n      return this.themeMode;\r\n    }\r\n\r\n   /**\r\n    * load intial theme\r\n    */\r\n   protected loadThemingScss(): Promise<void> {\r\n\r\n     // this is generated in angular.json, pulls from node_modules/@angular/material\r\n    return this.http.get('/assets/_theming.scss', { responseType: 'text' })\r\n      .pipe(\r\n        map((x: string) => {\r\n          return x\r\n            .replace(/\\n/gm, '??')\r\n            .replace(/\\$mat-([^:?]+)\\s*:\\s*\\([? ]*50:[^()]*contrast\\s*:\\s*\\([^)]+\\)[ ?]*\\);\\s*?/g,\r\n              (all: string, name: string) => name === 'grey' ? all : '')\r\n            .replace(/\\/\\*.*?\\*\\//g, '')\r\n            .split(/[?][?]/g)\r\n            .map((l: string) => l\r\n              .replace(/^\\s*(\\/\\/.*)?$/g, '')\r\n              .replace(/^\\$mat-blue-gray\\s*:\\s*\\$mat-blue-grey\\s*;\\s*/g, '')\r\n              .replace(/^\\s*|\\s*$/g, '')\r\n              .replace(/:\\s\\s+/g, ': ')\r\n            )\r\n            .filter((l: string) => !!l)\r\n            .join('\\n');\r\n        }),\r\n        map((txt: string) =>\r\n          // writeFile allows this file to be accessed from styles.scss\r\n          Sass.writeFile('~@angular/material/theming', txt, (result: boolean) => {\r\n           // console.log('Sass.writeFile', result);\r\n          }))\r\n      ).toPromise();\r\n   }\r\n\r\n  /**\r\n   * Get theme template and update it\r\n   * \r\n   * @param theme current theme\r\n   */\r\n  public GetTemplate(theme: ThemeModel): string {\r\n    return this.paletteTemplateService.GetTemplate(theme);\r\n  }\r\n\r\n  /**\r\n   * Compile SASS to CSS\r\n   *\r\n   * @param theme SASS stylesheet\r\n   * @returns compiled CSS\r\n   */\r\n   public async CompileScssTheme(theme: string) {\r\n    await this.ThemeScss;\r\n    return new Promise<string>((res, rej) => {\r\n      Sass.compile(theme.replace('@include angular-material-theme($altTheme);', ''), (v: any) => {\r\n        if (v.status === 0) {\r\n          res(v.text);\r\n        } else {\r\n          rej(v);\r\n        }\r\n      });\r\n    }\r\n    );\r\n   }\r\n\r\n   /**\r\n    * Return primary and accent colors for each color map, from colors 50 - A700\r\n    *\r\n    * @param color color\r\n    */\r\n   public GetPalette(color: string): MaterialPaletteModel {\r\n    const baseLight = tinyColor('#ffffff');\r\n    const baseDark = this.multiply(tinyColor(color).toRgb(), tinyColor(color).toRgb());\r\n    const [, , , baseTriad] = tinyColor(color).tetrad();\r\n\r\n    const primary = Object.keys(Constants.MIX_AMOUNTS_PRIMARY)\r\n      .map(k => {\r\n        const [light, amount] = Constants.MIX_AMOUNTS_PRIMARY[k];\r\n        return [k, tinyColor.mix(light ? baseLight : baseDark,\r\n          tinyColor(color), amount)] as [string, tinycolor.Instance];\r\n      });\r\n\r\n    const accent = Object.keys(Constants.MIX_AMOUNTS_SECONDARY)\r\n      .map(k => {\r\n        const [amount, sat, light] = Constants.MIX_AMOUNTS_SECONDARY[k];\r\n        return [k, tinyColor.mix(baseDark, baseTriad, amount)\r\n          .saturate(sat).lighten(light)] as [string, tinycolor.Instance];\r\n      });\r\n\r\n    return [...primary, ...accent].reduce((acc, [k, c]) => {\r\n      acc[k] = c.toHexString();\r\n      return acc;\r\n    }, {});\r\n   }\r\n\r\n   /**\r\n    * emit event with theme\r\n    */\r\n   protected emit(): void {\r\n     this.Theme.next(this.getTheme());\r\n   }\r\n\r\n   /**\r\n    * Return a new theme model\r\n    */\r\n   public getTheme(): ThemeModel {\r\n\r\n    return {\r\n      palette: this.Palette,\r\n      lightness: this.ThemeMode,\r\n    };\r\n   }\r\n\r\n   public multiply(rgb1: RGBA, rgb2: RGBA): any {\r\n    rgb1.b = Math.floor(rgb1.b * rgb2.b / 255);\r\n    rgb1.g = Math.floor(rgb1.g * rgb2.g / 255);\r\n    rgb1.r = Math.floor(rgb1.r * rgb2.r / 255);\r\n\r\n    return tinyColor('rgb ' + rgb1.r + ' ' + rgb1.g + ' ' + rgb1.b);\r\n   }\r\n\r\n   public UpdateTheme(theme: ThemeModel): void {\r\n\r\n    // SASS stylesheet\r\n    const source: string = this.GetTemplate(theme);\r\n\r\n    // Running functions outside of Angular's zone and do work that\r\n    // doesn't trigger Angular change-detection.\r\n   this.zone.runOutsideAngular(() => {\r\n\r\n     this.CompileScssTheme(source).then( (text: string) => {\r\n\r\n        // SASS compiled to CSS\r\n        const compiledDynamicCSS: string = text;\r\n\r\n        const dynamicStyleSheet: HTMLElement = document.getElementById('theme-builder-stylesheet');\r\n\r\n        // check if dynamic stylesheet exists, then remove it\r\n        if (dynamicStyleSheet) {\r\n          document.getElementsByTagName('body')[0].removeChild(dynamicStyleSheet);\r\n        }\r\n\r\n        // add dynamic stylesheet\r\n        const style = document.createElement('style');\r\n              style.id = 'theme-builder-stylesheet';\r\n              style.appendChild(document.createTextNode(compiledDynamicCSS));\r\n\r\n        document.getElementsByTagName('body')[0].appendChild(style);\r\n\r\n      }).catch((err: Error) => {\r\n        console.error(err);\r\n      });\r\n   });\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'lcu-theme-builder',\r\n  templateUrl: './theme-builder.component.html',\r\n  styleUrls: ['./theme-builder.component.scss']\r\n})\r\n\r\nexport class ThemeBuilderComponent implements OnInit  {\r\n\r\n  constructor()\r\n  {\r\n\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n\r\n  }\r\n\r\n}\r\n","import { Directive, OnInit, ElementRef, HostListener, Renderer2 } from '@angular/core';\r\nimport { ThemeColorPickerService } from '@lcu/common';\r\n\r\n@Directive({\r\n  selector: '[theme-builder]'\r\n})\r\nexport class ThemeBuilderDirective implements OnInit {\r\n\r\n  private currentColor: string;\r\n\r\n  constructor(\r\n    private elRef: ElementRef,\r\n    private renderer: Renderer2,\r\n    private themeService: ThemeColorPickerService\r\n  ) { }\r\n\r\n  @HostListener('mouseenter') onMouseEnter() {\r\n    this.hoverEffect(this.getThemeColor(), 'underline');\r\n  }\r\n\r\n  @HostListener('mouseleave') onMouseLeave() {\r\n    this.hoverEffect('', 'initial');\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    this.currentColor = this.getThemeColor();\r\n  }\r\n\r\n  private getThemeColor(): string {\r\n  \r\n    const theme = this.themeService.GetColorClass().value;\r\n    return 'color-swatch-' + theme.substring(theme.indexOf('-') + 1, theme.lastIndexOf('-'));\r\n  }\r\n\r\n  private hoverEffect(color: string, decoration: string): void {\r\n    const title = this.elRef.nativeElement.querySelector('.mat-card-title');\r\n    this.renderer.setStyle(title, 'text-decoration', decoration);\r\n\r\n    if (!color && this.currentColor) {\r\n      this.renderer.removeClass(title, this.currentColor);\r\n    } else if (color !== this.currentColor) {\r\n      this.renderer.removeClass(title, this.currentColor);\r\n    }\r\n\r\n    if (color) {\r\n      this.renderer.addClass(title, color);\r\n      this.currentColor = color;\r\n    }\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, Output } from '@angular/core';\r\nimport * as tinycolor from 'tinycolor2';\r\nimport { FormControl } from '@angular/forms';\r\nimport { EventEmitter } from '@angular/core';\r\nimport { PalettePickerService } from '../../services/palette-picker.service';\r\n// import * as EventEmitter from 'events';\r\n\r\nconst tinyColor = tinycolor;\r\n\r\n@Component({\r\n  selector: 'lcu-color-picker',\r\n  templateUrl: './color-picker.component.html',\r\n  styleUrls: ['./color-picker.component.scss']\r\n})\r\nexport class ColorPickerComponent implements OnInit {\r\n\r\n  /**\r\n   * Toggle backdrop when color picker is open\r\n   */\r\n  public ShowBackdrop: boolean;\r\n\r\n  /**\r\n   * Parent control from using component\r\n   */\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('control')\r\n  public Control: FormControl;\r\n\r\n  /**\r\n   * Disable color picker\r\n   */\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('disabled')\r\n  public Disabled: boolean;\r\n\r\n  /**\r\n   * Array of preset colors, shown in color picker\r\n   */\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('variants')\r\n  public Variants?: string[];\r\n\r\n  constructor(protected palettePickerService: PalettePickerService) {\r\n\r\n    this.ShowBackdrop = false;\r\n  }\r\n\r\n  /**\r\n   * Set the selected color\r\n   */\r\n  @Input('color')\r\n  public set Color(col: string) {\r\n\r\n    this.Control.setValue(col);\r\n  }\r\n\r\n  /**\r\n   * Get the selected color\r\n   *\r\n   */\r\n  public get Color() {\r\n    return this.Control.value;\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n  }\r\n\r\n  /**\r\n   * Turn backdrop on\r\n   *\r\n   * @param on toggle\r\n   */\r\n  public SetBackdrop(on: boolean): void {\r\n\r\n    this.ShowBackdrop = on;\r\n  }\r\n\r\n  /**\r\n   * Set font color to contrast background color of display\r\n   *\r\n   * @param col color\r\n   */\r\n  public GetTextColor(col: string): any {\r\n\r\n    return tinyColor(col).isLight() ? '#000' : '#fff';\r\n  }\r\n\r\n  public ColorPickerClosed(evt: string): void {\r\n\r\n    this.palettePickerService.CloseColorPicker(evt);\r\n  }\r\n\r\n  public ColorPickerChange(evt: string): void {\r\n\r\n    this.Color = evt;\r\n  }\r\n\r\n}\r\n","import { Constants } from './../../utils/constants.utils';\r\nimport { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { AbstractControl, FormGroup, FormControl } from '@angular/forms';\r\nimport { ThemeBuilderService } from '../../services/theme-builder.service';\r\nimport { PaletteModel } from '../../models/palette.model';\r\nimport { Subscription } from 'rxjs/internal/Subscription';\r\nimport { PalettePickerService } from '../../services/palette-picker.service';\r\nimport { distinctUntilChanged } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'lcu-palette-picker',\r\n  templateUrl: './palette-picker.component.html',\r\n  styleUrls: ['./palette-picker.component.scss']\r\n})\r\nexport class PalettePickerComponent implements OnInit, OnDestroy {\r\n\r\n  public Form: FormGroup;\r\n\r\n  protected colorPickerClosedSubscription: Subscription;\r\n\r\n  protected formSubscription: Subscription;\r\n\r\n  public PrimaryColor: string;\r\n  public AccentColor: string;\r\n  public WarnColor: string;\r\n\r\n  /**\r\n   * Access Primary form group\r\n   */\r\n  public get Primary(): AbstractControl {\r\n    return this.Form.get('primary');\r\n  }\r\n\r\n  /**\r\n   * Access Accent form group\r\n   */\r\n  public get Accent(): AbstractControl {\r\n    return this.Form.get('accent');\r\n  }\r\n\r\n  /**\r\n   * Access Warn form group\r\n   */\r\n  public get Warn(): AbstractControl {\r\n    return this.Form.get('warn');\r\n  }\r\n\r\n  protected palettePickerChangedSubscription: Subscription;\r\n\r\n  constructor(protected themeBuilderService: ThemeBuilderService,\r\n              protected palettePickerService: PalettePickerService) {\r\n\r\n    this.setupForm();\r\n\r\n    this.colorPickerClosedSubscription = this.palettePickerService.ColorPickerClosed\r\n    .subscribe((val: string) => {\r\n      this.updatePalette();\r\n    });\r\n\r\n    // Update base colors of the color picker on change\r\n    // when manually setting colors, not using\r\n    // the color picker itself\r\n    this.palettePickerService.ColorPickerChanged\r\n    .subscribe((val: PaletteModel) => {\r\n\r\n      this.PrimaryColor = val.primary.main;\r\n      this.AccentColor = val.accent.main;\r\n      this.WarnColor = val.warn.main;\r\n      // this.Primary.setValue(val.primary.main);\r\n      // this.Accent.setValue(val.accent.main);\r\n      // this.Warn.setValue(val.warn.main);\r\n    });\r\n  }\r\n\r\n  protected updatePalette(): void {\r\n\r\n    let palette: PaletteModel = new PaletteModel();\r\n    palette = { ...this.palettePickerService.CurrentPalette, ...palette };\r\n    palette.primary.main = this.Primary.value.main;\r\n    palette.accent.main = this.Accent.value.main;\r\n    palette.warn.main = this.Warn.value.main;\r\n\r\n    this.themeBuilderService.Palette = palette;\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n\r\n    // setting initial values,\r\n   // this isn't the right way to do this, but for the moment - shannon\r\n    this.patchValue(Constants.InitialValues, true);\r\n\r\n   this.Form.valueChanges\r\n   .pipe(distinctUntilChanged((a: PaletteModel, b: PaletteModel) => {\r\n    //  console.log('A', a);\r\n    //  console.log('B', b);\r\n     return JSON.stringify(a) !== JSON.stringify(b);\r\n   }))\r\n    .subscribe((palette: PaletteModel) => {\r\n      console.log('ASKASLKDALKSD', palette);\r\n      this.themeBuilderService.Palette = palette;\r\n    });\r\n  }\r\n\r\n  public ngOnDestroy(): void {\r\n\r\n    this.formSubscription.unsubscribe();\r\n    this.colorPickerClosedSubscription.unsubscribe();\r\n  }\r\n\r\n  protected patchValue(val: PaletteModel | any, emitValue: boolean): void {\r\n    this.Form.patchValue(val, {emitEvent: emitValue});\r\n  }\r\n\r\n  /**\r\n   * Setup the form\r\n   */\r\n  protected setupForm(): void {\r\n    this.Form = new FormGroup({\r\n      primary: new FormGroup({\r\n        main: new FormControl(''),\r\n        lighter: new FormControl(''),\r\n        darker: new FormControl('')\r\n      }, {updateOn: 'change'}),\r\n      accent: new FormGroup({\r\n        main: new FormControl(''),\r\n        lighter: new FormControl(''),\r\n        darker: new FormControl('')\r\n      }),\r\n      warn: new FormGroup({\r\n        main: new FormControl(''),\r\n        lighter: new FormControl(''),\r\n        darker: new FormControl('')\r\n      }, {updateOn: 'change'}),\r\n      lightText: new FormControl('', []),\r\n      lightBackground: new FormControl('', []),\r\n      darkText: new FormControl('', []),\r\n      darkBackground: new FormControl('', [])\r\n    }, {updateOn: 'change'});\r\n  }\r\n}\r\n","import { Component, OnInit, Input, OnDestroy } from '@angular/core';\r\nimport { FormGroup, AbstractControl, FormControl } from '@angular/forms';\r\n\r\nimport { ThemeBuilderService } from '../../services/theme-builder.service';\r\nimport { Constants } from '../../utils/constants.utils';\r\nimport { Subscription } from 'rxjs';\r\nimport { PalettePickerService } from '../../services/palette-picker.service';\r\nimport { PaletteModel } from '../../models/palette.model';\r\n\r\n@Component({\r\n  selector: 'lcu-sub-palette-picker',\r\n  templateUrl: './sub-palette-picker.component.html',\r\n  styleUrls: ['./sub-palette-picker.component.scss']\r\n})\r\nexport class SubPalettePickerComponent implements OnInit, OnDestroy {\r\n\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('form')\r\n  public Form: FormGroup;\r\n\r\n  @Input('color-picker-color')\r\n  public set ColorPickerColor(val: string) {\r\n    this.Main.setValue(val);\r\n    this.onMainChange();\r\n  }\r\n\r\n  /**\r\n   * Access Main color form control\r\n   */\r\n  public get Main(): AbstractControl {\r\n    return this.Form.get('main');\r\n  }\r\n\r\n  /**\r\n   * Access Light color form control\r\n   */\r\n  public get Lighter(): AbstractControl {\r\n    return this.Form.get('lighter');\r\n  }\r\n\r\n  /**\r\n   * Access Dark color form control\r\n   */\r\n  public get Darker(): AbstractControl {\r\n    return this.Form.get('darker');\r\n  }\r\n\r\n  protected colorPickerClosedSubscription: Subscription;\r\n\r\n  /**\r\n   * Toggle control for light and dark colors\r\n   */\r\n  public Unlocked: FormControl;\r\n\r\n  /**\r\n   * Set preset color palette\r\n   */\r\n  public get Variants(): Array<{ key: string; hex: string; isLight: boolean; }> {\r\n\r\n    return !this.themeBuilderService.MaterialPaletteColors ? undefined :\r\n            this.materialKeys.map((x: string) =>\r\n            {\r\n              return this.themeBuilderService.MaterialPaletteColors[x]\r\n            });\r\n  }\r\n\r\n  protected palettePickerChangedSubscription: Subscription;\r\n\r\n  /**\r\n   * Keys for palette colors, 50 - A700\r\n   */\r\n  protected materialKeys: Array<string>;\r\n\r\n  constructor(protected themeBuilderService: ThemeBuilderService,\r\n    protected palettePickerService: PalettePickerService) {\r\n    this.Unlocked = new FormControl(false);\r\n    this.materialKeys = [...Object.keys(Constants.MIX_AMOUNTS_PRIMARY),\r\n                         ...Object.keys(Constants.MIX_AMOUNTS_SECONDARY)];\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n\r\n    if (this.Main.value) {\r\n     this.onMainChange();\r\n    }\r\n\r\n    this.colorPickerClosedSubscription = this.palettePickerService.ColorPickerClosed\r\n    .subscribe((val: string) => {\r\n      this.onMainChange();\r\n    });\r\n  }\r\n\r\n  public ngOnDestroy(): void {\r\n\r\n    this.palettePickerChangedSubscription.unsubscribe();\r\n    this.colorPickerClosedSubscription.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Returns palette colors, 50 - A700\r\n   *\r\n   * @param color selected base color, chosen from color pickers\r\n   */\r\n  protected onMainChange(): void {\r\n\r\n    this.themeBuilderService.MaterialPaletteColors = this.themeBuilderService.GetPalette(this.Form.value.main);\r\n\r\n    // set lightest and darkest hue colors in color picker\r\n    if (!this.Unlocked.value) {\r\n      this.Form.patchValue({ lighter: this.themeBuilderService.MaterialPaletteColors['50'] });\r\n      this.Form.patchValue({ darker: this.themeBuilderService.MaterialPaletteColors['900'] });\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AbstractControl, FormControl, FormGroup } from '@angular/forms';\r\nimport { ThemeBuilderService } from '../../services/theme-builder.service';\r\nimport { MatSlideToggleChange } from '@angular/material/slide-toggle';\r\n/**\r\n * String literal data type\r\n */\r\ntype ModeType = 'dark' | 'light';\r\n\r\n@Component({\r\n  selector: 'lcu-mode-toggle',\r\n  templateUrl: './mode-toggle.component.html',\r\n  styleUrls: ['./mode-toggle.component.scss']\r\n})\r\nexport class LightnessPickerComponent implements OnInit {\r\n\r\n  /**\r\n   * Access Toggle field within the form group\r\n   */\r\n   public get Toggle(): AbstractControl {\r\n    return this.ToggleForm.get('toggle');\r\n  }\r\n\r\n  public ToggleForm: FormGroup;\r\n\r\n  public ToggleMode: string;\r\n\r\n  constructor(protected themeBuilderService: ThemeBuilderService) { \r\n    this.ToggleMode = 'Dark Mode';\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n\r\n    this.formSetup();\r\n  }\r\n\r\n    protected formSetup(): void {\r\n\r\n      this.ToggleForm = new FormGroup({\r\n        toggle: new FormControl(false)\r\n      })\r\n\r\n      this.onChanges();\r\n    }\r\n\r\n    protected onChanges(): void {\r\n      this.Toggle.valueChanges\r\n      .subscribe((val: boolean) => {\r\n        this.ToggleMode = val ? 'Light Mode' : 'Dark Mode';\r\n        this.themeBuilderService.ThemeMode = val;\r\n      });\r\n    }\r\n  }\r\n","\r\nimport { PalettePickerService } from '../../services/palette-picker.service';\r\nimport { Component, OnInit, Input, OnDestroy } from '@angular/core';\r\nimport { FormGroup, AbstractControl, FormControl, Validators } from '@angular/forms';\r\nimport * as tinycolor from 'tinycolor2';\r\nimport { PaletteTemplateService } from '../../services/palette-template.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { PaletteModel } from '../../models/palette.model';\r\nimport { PaletteColorMapModel } from '../../models/palette-color-map.model';\r\nimport { MaterialPaletteModel } from '../../models/material-palette.model';\r\nimport { Constants } from '../../utils/constants.utils';\r\nimport { ThemeBuilderService } from '../../services/theme-builder.service';\r\nimport { ColorModel } from '../../models/color.model';\r\n\r\nconst tinyColor = tinycolor;\r\n// const styleVariables = require('./assets/styles/dynamic-theme.scss');\r\n\r\n/**\r\n * String literal data type\r\n */\r\ntype ModeType = 'dark' | 'light';\r\n\r\n@Component({\r\n  selector: 'lcu-variant-colors',\r\n  templateUrl: './variant-colors.component.html',\r\n  styleUrls: ['./variant-colors.component.scss']\r\n})\r\n\r\nexport class VariantColorsComponent implements OnInit, OnDestroy {\r\n\r\n  private _accentColor: string;\r\n  private _primaryColor: string;\r\n  private _warnColor: string;\r\n\r\n// tslint:disable-next-line:no-input-rename\r\n@Input('accent-color')\r\nset AccentColor(val: string) {\r\n  this._accentColor = val;\r\n  this.updateAccentColor(val);\r\n}\r\n\r\nget AccentColor(): string {\r\n  return this._accentColor;\r\n}\r\n\r\n// tslint:disable-next-line:no-input-rename\r\n@Input('primary-color')\r\nset PrimaryColor(val: string) {\r\n  this._primaryColor = val;\r\n  this.updatePrimaryColor(val);\r\n}\r\n\r\nget PrimaryColor(): string {\r\n  return this.PrimaryColor;\r\n}\r\n\r\n// tslint:disable-next-line:no-input-rename\r\n@Input('warn-color')\r\nset WarnColor(val: string) {\r\n  this._warnColor = val;\r\n  this.updateWarnColor(val);\r\n}\r\n\r\nget WarnColor(): string {\r\n  return this.WarnColor;\r\n}\r\n\r\n/**\r\n * Access primary color field\r\n */\r\npublic get PrimaryColorControl(): AbstractControl {\r\n  return this.Form.get('primaryColorControl');\r\n}\r\n\r\n/**\r\n * Access accent color field\r\n */\r\npublic get AccentColorControl(): AbstractControl {\r\n  return this.Form.get('accentColorControl');\r\n}\r\n\r\n/**\r\n * property for reactive form\r\n */\r\npublic Form: FormGroup;\r\n\r\nprotected paletteChangedSubscription: Subscription;\r\n\r\n  constructor(\r\n    public PalettePickerService: PalettePickerService,\r\n    protected themeBuilderService: ThemeBuilderService) {\r\n    this.PalettePickerService.PrimaryColorPalette = [];\r\n    this.PalettePickerService.AccentColorPalette = [];\r\n    this.PalettePickerService.WarnColorPalette = [];\r\n  }\r\n\r\n public ngOnInit(): void {\r\n    this.setupForm();\r\n\r\n    this.paletteChangedSubscription = this.PalettePickerService.ColorPickerChanged\r\n    .subscribe((palette: PaletteModel) => {\r\n\r\n      if (!palette || !palette.primary) {\r\n        return;\r\n      }\r\n\r\n      this.updateAccentColor(palette.accent.main);\r\n      this.updatePrimaryColor(palette.primary.main);\r\n      this.updateWarnColor(palette.warn.main);\r\n    });\r\n  }\r\n\r\n  public ngOnDestroy(): void {\r\n    this.paletteChangedSubscription.unsubscribe();\r\n  }\r\n\r\n  protected updatePrimaryColor(color: string): void {\r\n    this.PalettePickerService.PrimaryColorPalette = this.computeColors(color ? color : this.PrimaryColorControl.value);\r\n\r\n    for (const c of this.PalettePickerService.PrimaryColorPalette) {\r\n      const key = `--theme-primary-${c.name}`;\r\n      const value = c.hex;\r\n      const key2 = `--theme-primary-contrast-${c.name}`;\r\n      const value2 = c.darkContrast ? 'rgba(black, 0.87)' : 'white';\r\n\r\n      // set or update CSS variable values\r\n      document.documentElement.style.setProperty(key, value);\r\n      document.documentElement.style.setProperty(key2, value2);\r\n    }\r\n  }\r\n\r\n  protected updateAccentColor(color: string): void {\r\n    this.PalettePickerService.AccentColorPalette = this.computeColors(color ? color : this.AccentColorControl.value);\r\n\r\n    for (const c of this.PalettePickerService.AccentColorPalette) {\r\n      const key = `--theme-accent-${c.name}`;\r\n      const value = c.hex;\r\n      const key2 = `--theme-primary-contrast-${c.name}`;\r\n      const value2 = c.darkContrast ? 'rgba(black, 0.87)' : 'white';\r\n      document.documentElement.style.setProperty(key, value);\r\n      document.documentElement.style.setProperty(key2, value2);\r\n    }\r\n  }\r\n\r\n  protected updateWarnColor(color: string): void {\r\n    this.PalettePickerService.WarnColorPalette = this.computeColors(color);\r\n\r\n    for (const c of this.PalettePickerService.WarnColorPalette) {\r\n      const key = `--theme-warn-${c.name}`;\r\n      const value = c.hex;\r\n      const key2 = `--theme-primary-contrast-${c.name}`;\r\n      const value2 = c.darkContrast ? 'rgba(black, 0.87)' : 'white';\r\n      document.documentElement.style.setProperty(key, value);\r\n      document.documentElement.style.setProperty(key2, value2);\r\n    }\r\n  }\r\n\r\n  protected setupForm(): void {\r\n    this.Form = new FormGroup({\r\n      primaryColorControl: new FormControl('#ffcc11'),\r\n      accentColorControl: new FormControl('#0000aa')\r\n    });\r\n  }\r\n\r\n  protected computeColors(color: string): Array<ColorModel> {\r\n\r\n    const baseLightColor = tinyColor('#ffffff');\r\n    const baseDarkColor = this.themeBuilderService.multiply(tinyColor(color).toRgb(), tinyColor(color).toRgb());\r\n    const [, , , baseTetrad] = tinyColor(color).tetrad();\r\n\r\n    return [\r\n      this.getColorObject(tinyColor.mix(baseLightColor, tinyColor(color), 12), '50'),\r\n      this.getColorObject(tinyColor.mix(baseLightColor, tinyColor(color), 30), '100'),\r\n      this.getColorObject(tinyColor.mix(baseLightColor, tinyColor(color), 50), '200'),\r\n      this.getColorObject(tinyColor.mix(baseLightColor, tinyColor(color), 70), '300'),\r\n      this.getColorObject(tinyColor.mix(baseLightColor, tinyColor(color), 85), '400'),\r\n      this.getColorObject(tinyColor(color), '500'),\r\n      this.getColorObject(tinyColor.mix(baseDarkColor, tinyColor(color), 87), '600'),\r\n      this.getColorObject(tinyColor.mix(baseDarkColor, tinyColor(color), 70), '700'),\r\n      this.getColorObject(tinyColor.mix(baseDarkColor, tinyColor(color), 54), '800'),\r\n      this.getColorObject(tinyColor.mix(baseDarkColor, tinyColor(color), 25), '900'),\r\n      this.getColorObject(tinyColor.mix(baseDarkColor, baseTetrad, 15).saturate(80).lighten(65), 'A100'),\r\n      this.getColorObject(tinyColor.mix(baseDarkColor, baseTetrad, 15).saturate(80).lighten(55), 'A200'),\r\n      this.getColorObject(tinyColor.mix(baseDarkColor, baseTetrad, 15).saturate(100).lighten(45), 'A400'),\r\n      this.getColorObject(tinyColor.mix(baseDarkColor, baseTetrad, 15).saturate(100).lighten(40), 'A700')\r\n    ];\r\n  }\r\n// force change\r\n  protected getColorObject(value: tinycolor.Instance, name: string): ColorModel {\r\n    const c = tinyColor(value);\r\n    return {\r\n      name,\r\n      hex: c.toHexString(),\r\n      darkContrast: c.isLight()\r\n    };\r\n  }\r\n}\r\n","export class ThemePickerModel {\r\n\r\n    public Accent: string;\r\n    public ID: string;\r\n    public Primary: string;\r\n    public Warn: string;\r\n\r\n    constructor(opts: ThemePickerModel) {\r\n        Object.assign(this, opts); // destructure values\r\n    }\r\n}","import { PalettePickerService } from './../../services/palette-picker.service';\r\nimport { ThemePickerModel } from './../../models/theme-picker.model';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { PaletteModel } from '../../models/palette.model';\r\nimport { ThemeBuilderService } from '../../services/theme-builder.service';\r\nimport { Constants } from '../../utils/constants.utils';\r\nimport { AbstractControl, FormControl, FormGroup, Validators } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'lcu-theme-picker',\r\n  templateUrl: './theme-picker.component.html',\r\n  styleUrls: ['./theme-picker.component.scss']\r\n})\r\nexport class ThemePickerComponent implements OnInit {\r\n\r\n  /**\r\n   * property for reactive form\r\n   */\r\n  public ManualForm: FormGroup;\r\n\r\n\r\n/**\r\n * Access manual accent color field\r\n */\r\npublic get ManualAccent(): AbstractControl {\r\n  return this.ManualForm.get('manualAccent');\r\n}\r\n\r\n/**\r\n * Access manual primary color field\r\n */\r\n public get ManualPrimary(): AbstractControl {\r\n  return this.ManualForm.get('manualPrimary');\r\n}\r\n\r\n/**\r\n * Access manual theme name field\r\n */\r\npublic get ManualThemeName(): AbstractControl {\r\n  return this.ManualForm.get('manualThemeName');\r\n}\r\n\r\n/**\r\n * Access manual warn color field\r\n */\r\npublic get ManualWarn(): AbstractControl {\r\n  return this.ManualForm.get('manualWarn');\r\n}\r\n\r\n\r\n  public Themes: Array<ThemePickerModel>;\r\n\r\n  constructor(\r\n    protected palettePickerService: PalettePickerService,\r\n    protected themeBuilderService: ThemeBuilderService) {\r\n\r\n      this.setupForm();\r\n      this.themes();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  public SetActiveTheme(theme: ThemePickerModel): void {\r\n    let palette: PaletteModel = new PaletteModel();\r\n    palette = { ...this.palettePickerService.CurrentPalette, ...palette };\r\n\r\n    palette.primary.main = theme.Primary;\r\n    palette.accent.main = theme.Accent;\r\n    palette.warn.main = theme.Warn;\r\n\r\n  // this.palettePickerService.PalettePickerChange(palette);\r\n\r\n  this.themeBuilderService.Palette = palette;\r\n  }\r\n\r\n  /**\r\n   * Manually create theme, by using inputs\r\n   */\r\n  public SetManualTheme(): void {\r\n    let manualPalette: ThemePickerModel;\r\n    manualPalette = new ThemePickerModel(\r\n      {\r\n        ID: this.ManualThemeName.value,\r\n        Primary: this.ManualPrimary.value,\r\n        Accent: this.ManualAccent.value,\r\n        Warn: this.ManualWarn.value\r\n      }\r\n    )\r\n    this.Themes.unshift(manualPalette);\r\n    this.SetActiveTheme(manualPalette);\r\n  }\r\n\r\n  protected setupForm(): void {\r\n\r\n    this.ManualForm = new FormGroup({\r\n      manualThemeName: new FormControl('', {validators: Validators.required}),\r\n      manualPrimary: new FormControl(\r\n        '',\r\n        {validators: Validators.required}),\r\n      manualAccent: new FormControl(\r\n        '',\r\n        {validators: Validators.required}),\r\n      manualWarn: new FormControl(\r\n        '',\r\n        {validators: Validators.required})\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Create themes for theme picker\r\n   */\r\n  protected themes(): void {\r\n    this.Themes = [\r\n      new ThemePickerModel(\r\n        {\r\n          ID: 'Fathym Brand',\r\n          Primary: Constants.document.getPropertyValue('--initial-primary'),\r\n          Accent: Constants.document.getPropertyValue('--initial-accent'),\r\n          Warn: Constants.document.getPropertyValue('--initial-warn')\r\n        }\r\n      ),\r\n      new ThemePickerModel(\r\n        {\r\n          ID: 'Yellow', \r\n          Primary: '#ffcc11', \r\n          Accent: '#06a5ff', \r\n          Warn: '#990000'\r\n        }\r\n      ),\r\n      new ThemePickerModel(\r\n        {\r\n          ID: 'Pink', \r\n          Primary: '#a83271', \r\n          Accent: '#6103ff', \r\n          Warn: '#b9f013'\r\n        }\r\n      )\r\n    ];\r\n  }\r\n\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { FlexLayoutModule } from '@angular/flex-layout';\r\nimport { FathymSharedModule, MaterialModule } from '@lcu/common';\r\n\r\nimport { ColorPickerModule } from 'ngx-color-picker';\r\n\r\nimport { ThemeBuilderService } from './services/theme-builder.service';\r\nimport { ThemeBuilderComponent } from './controls/theme-builder/theme-builder.component';\r\nimport { ThemeBuilderDirective } from './directives/theme-builder.directive';\r\nimport { ColorPickerComponent } from './controls/color-picker/color-picker.component';\r\nimport { PalettePickerComponent } from './controls/palette-picker/palette-picker.component';\r\nimport { SubPalettePickerComponent } from './controls/sub-palette-picker/sub-palette-picker.component';\r\nimport { LightnessPickerComponent } from './controls/mode-toggle/mode-toggle.component';\r\nimport { VariantColorsComponent } from './controls/variant-colors/variant-colors.component';\r\nimport { ThemePickerComponent } from './controls/theme-picker/theme-picker.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ThemeBuilderComponent,\r\n    ThemeBuilderDirective,\r\n    ColorPickerComponent,\r\n    PalettePickerComponent,\r\n    SubPalettePickerComponent,\r\n    LightnessPickerComponent,\r\n    VariantColorsComponent,\r\n    ThemePickerComponent],\r\n  imports: [\r\n    FathymSharedModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    FlexLayoutModule,\r\n    MaterialModule,\r\n    ColorPickerModule\r\n  ],\r\n  exports: [ThemeBuilderComponent, ThemeBuilderDirective, ThemePickerComponent],\r\n  entryComponents: [\r\n    ThemePickerComponent\r\n  ]\r\n})\r\nexport class ThemeBuilderModule {\r\n  static forRoot(): ModuleWithProviders<ThemeBuilderModule> {\r\n    return {\r\n      ngModule: ThemeBuilderModule,\r\n      providers: [ThemeBuilderService]\r\n    };\r\n  }\r\n}\r\n","export class ThemeBuilderModel {\r\n    public ThemeBuilderId: number;\r\n    public Content: string;\r\n    public Icon: string;\r\n    public Loading?: boolean;\r\n    public Subtitle: string;\r\n    public Title: string;\r\n    public Url?: string;\r\n}\r\n","export class SubPaletteModel {\r\n    public darker: string;\r\n    public lighter: string;\r\n    public main: string;\r\n}\r\n","import { PaletteModel } from './palette.model';\r\n\r\nexport class ThemeModel {\r\n    public lightness: boolean;\r\n    public palette: PaletteModel;\r\n}\r\n","export class ColorModel {\r\n    public name: string;\r\n    public hex: string;\r\n    public darkContrast: boolean;\r\n}"]}